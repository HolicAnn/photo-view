(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c9e729f"],{"1b8a":function(t,e,a){"use strict";var i=a("8dff"),n=a.n(i);n.a},"44bb":function(t,e,a){},"8dff":function(t,e,a){},ab73:function(t,e,a){"use strict";var i=a("44bb"),n=a.n(i);n.a},af13:function(t,e,a){"use strict";var i=a("c968"),n=a.n(i);n.a},c968:function(t,e,a){},e6e2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-tabs",{on:{change:t.change},model:{value:t.defaultKey,callback:function(e){t.defaultKey=e},expression:"defaultKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:"分类列表"}},[a("list-view",{on:{show:t.showTab}})],1),t.show&&t.classifyId?a("a-tab-pane",{key:"2",attrs:{tab:"产品列表"}},[a("item-view",{attrs:{parentId:t.classifyId}})],1):t._e()],1)],1)},n=[];a("96cf"),a("d3b7"),a("e6cf");function s(t,e,a,i,n,s,r){try{var l=t[s](r),o=l.value}catch(c){return void a(c)}l.done?e(o):Promise.resolve(o).then(i,n)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var r=t.apply(e,a);function l(t){s(r,i,n,l,o,"next",t)}function o(t){s(r,i,n,l,o,"throw",t)}l(void 0)}))}}var l,o=a("ade3"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{"data-source":t.list,pagination:t.page},on:{change:t.change}},[a("a-table-column",{attrs:{title:"序号","data-index":"seq"}}),a("a-table-column",{attrs:{title:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.filepath,height:"100px"}})]}}])}),a("a-table-column",{attrs:{title:"名称","data-index":"name"}}),a("a-table-column",{attrs:{title:"描述","data-index":"memo"}}),a("a-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("a-button",{staticStyle:{"margin-right":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e)}}},[t._v("编辑")]),a("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.del(e._id)}}},[t._v("删除")])]}}])})],1),a("a-row",{staticStyle:{margin:"10px 0"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建")])],1),a("a-modal",{attrs:{title:t.title,width:"600px"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("a-form-item",{attrs:{label:"序号"}},[a("a-input",{model:{value:t.form.seq,callback:function(e){t.$set(t.form,"seq",e)},expression:"form.seq"}})],1),a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-item",{attrs:{label:"描述"}},[a("a-input",{model:{value:t.form.memo,callback:function(e){t.$set(t.form,"memo",e)},expression:"form.memo"}})],1),a("a-form-item",{attrs:{label:"图片"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{"list-type":"picture-card","show-upload-list":!1,action:"/admin/user/upload"},on:{change:t.handleChange}},[t.form.filepath?a("img",{attrs:{src:t.form.filepath,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)])],1)],1)],1)],1)},u=[],d=(a("fb6a"),a("25f0"),{data:function(){var t;return t={loading:!1,list:[],visible:!1,title:"新建",type:"add",form:{seq:"",name:"",memo:"",filepath:""}},Object(o["a"])(t,"loading",!1),Object(o["a"])(t,"page",{pageSize:15,total:0,current:1}),t},mounted:function(){this.getSearch()},methods:{add:function(){this.visible=!0,this.title="新建",this.type="add",this.form={seq:"",name:"",memo:"",filepath:""}},handleOk:function(){var t=this,e="/admin/user/add";"edit"==this.type&&(e="/admin/user/edit"),this.$http.post(e,this.form).then((function(e){e&&(t.visible=!1,t.getSearch())}))},handleChange:function(t){"uploading"!==t.file.status?"done"===t.file.status&&(this.loading=!1,t.file.response&&200==t.file.response.state&&(this.form["filepath"]=t.file.response.url)):this.loading=!0},getSearch:function(){var t=this;this.$http.get("/admin/user/list?s="+(this.page.current-1)*this.page.pageSize+"&n="+this.page.pageSize).then((function(e){e&&(t.list=e.data||[],t.page.total=e.total||0)}))},change:function(t){var e=t.current;this.page.current=e,this.getSearch()},edit:function(t){this.type="edit",this.form=this.deepClone(t),this.visible=!0,this.title="编辑"},isClass:function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)},deepClone:function(t){var e,a=this.isClass(t);if("Object"===a)e={};else{if("Array"!==a)return t;e=[]}for(var i in t){var n=t[i];"Object"==this.isClass(n)||"Array"==this.isClass(n)?e[i]=this.deepClone(n):e[i]=t[i]}return e},del:function(t){var e=this;this.$createElement;this.$confirm({title:"提示",content:function(t){return t("div",{style:"color:red;"},["确定删除当前数据"])},onOk:function(){e.$http.post("/admin/user/delete",{id:t}).then((function(t){t&&e.getSearch()}))},onCancel:function(){}})}}}),f=d,h=(a("1b8a"),a("2877")),p=Object(h["a"])(f,c,u,!1,null,"752209e8",null),m=p.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{"data-source":t.list,pagination:t.page},on:{change:t.change}},[a("a-table-column",{attrs:{title:"序号","data-index":"seq"}}),a("a-table-column",{attrs:{title:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.thumb,height:"100px"}})]}}])}),a("a-table-column",{attrs:{title:"名称","data-index":"title"}}),a("a-table-column",{attrs:{title:"描述","data-index":"desc"}}),a("a-table-column",{attrs:{title:"背景色","data-index":"background_color"}}),a("a-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("a-button",{staticStyle:{"margin-right":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e)}}},[t._v("编辑")]),a("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.del(e._id)}}},[t._v("删除")])]}}])})],1),a("a-row",{staticStyle:{margin:"10px 0"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建")])],1),a("a-modal",{attrs:{title:t.title,width:"600px"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("a-form-item",{attrs:{label:"序号"}},[a("a-input",{model:{value:t.form.seq,callback:function(e){t.$set(t.form,"seq",e)},expression:"form.seq"}})],1),a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("a-form-item",{attrs:{label:"描述"}},[a("a-input",{model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("a-form-item",{attrs:{label:"链接"}},[a("a-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),a("a-form-item",{attrs:{label:"背景色"}},[a("a-input",{model:{value:t.form.background_color,callback:function(e){t.$set(t.form,"background_color",e)},expression:"form.background_color"}})],1),a("a-form-item",{attrs:{label:"图片"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{"list-type":"picture-card","show-upload-list":!1,action:"/admin/upload/"},on:{change:t.handleChange}},[t.form.thumb?a("img",{attrs:{src:t.form.thumb,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)])],1)],1)],1)],1)},g=[],v={props:["parentId"],data:function(){var t;return t={loading:!1,list:[],visible:!1,title:"新建",type:"add",form:{seq:"",title:"",background_color:"",desc:"",thumb:"",url:""}},Object(o["a"])(t,"loading",!1),Object(o["a"])(t,"page",{pageSize:15,total:0,current:1}),t},mounted:function(){this.getSearch()},methods:{add:function(){this.visible=!0,this.title="新建",this.type="add",this.form={seq:"",title:"",background_color:"",desc:"",thumb:"",url:""}},handleOk:function(){var t=this,e="/admin/product/add";this.form.parentId=this.parentId,"edit"==this.type&&(e="/admin/product/edit"),this.$http.post(e,this.form).then((function(e){e&&(t.visible=!1,t.getSearch())}))},handleChange:function(t){"uploading"!==t.file.status?"done"===t.file.status&&(this.loading=!1,t.file.response&&200==t.file.response.state&&(this.form["thumb"]=t.file.response.url)):this.loading=!0},getSearch:function(){var t=this;this.$http.get("/admin/product/list?type=1&s="+(this.page.current-1)*this.page.pageSize+"&n="+this.page.pageSize+"&parentId="+this.parentId).then((function(e){e&&(t.list=e.data||[],t.page.total=e.total||0)}))},change:function(t){var e=t.current;this.page.current=e,this.getSearch()},isClass:function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)},deepClone:function(t){var e,a=this.isClass(t);if("Object"===a)e={};else{if("Array"!==a)return t;e=[]}for(var i in t){var n=t[i];"Object"==this.isClass(n)||"Array"==this.isClass(n)?e[i]=this.deepClone(n):e[i]=t[i]}return e},edit:function(t){this.type="edit",this.form=this.deepClone(t),this.visible=!0,this.title="编辑"},del:function(t){var e=this;this.$createElement;this.$confirm({title:"提示",content:function(t){return t("div",{style:"color:red;"},["确定删除当前数据"])},onOk:function(){e.$http.post("/admin/product/del",{id:t}).then((function(t){t&&e.getSearch()}))},onCancel:function(){}})}}},y=v,k=(a("ab73"),Object(h["a"])(y,b,g,!1,null,"79bacb59",null)),w=k.exports,x={components:{ListView:m,ItemView:w},data:function(){var t;return t={loading:!1,list:[],visible:!1,title:"新建",type:"add",form:{seq:"",url:"",image:""}},Object(o["a"])(t,"loading",!1),Object(o["a"])(t,"previewVisible",!1),Object(o["a"])(t,"previewImage",""),Object(o["a"])(t,"imageUrl",""),Object(o["a"])(t,"show",!1),Object(o["a"])(t,"classifyId",""),Object(o["a"])(t,"defaultKey","1"),t},methods:(l={add:function(){this.visible=!0,this.title="新建",this.type="add"},handleOk:function(){},handleChange:function(t){"uploading"!==t.file.status?t.file.status:this.loading=!0},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return r(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()}},Object(o["a"])(l,"handleChange",(function(t){t.fileList})),Object(o["a"])(l,"showTab",(function(t){var e=this,a=t.show,i=t.classifyId;this.show=a,this.classifyId=i,this.$nextTick((function(){e.defaultKey="2"}))})),Object(o["a"])(l,"change",(function(t){1==t&&(this.show=!1,this.classifyId="")})),l)},O=x,C=(a("af13"),Object(h["a"])(O,i,n,!1,null,"04e7c82f",null));e["default"]=C.exports}}]);