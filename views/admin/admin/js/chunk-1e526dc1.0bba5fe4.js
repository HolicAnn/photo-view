(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e526dc1"],{1106:function(t,a,e){},"5a6e":function(t,a,e){"use strict";var i=e("c886"),o=e.n(i);o.a},b793:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-table",{attrs:{scroll:{x:!0},"data-source":t.list,pagination:t.page},on:{change:t.change}},[e("a-table-column",{attrs:{title:"序号","data-index":"seq"}}),e("a-table-column",{attrs:{title:"名称","data-index":"name"}}),e("a-table-column",{attrs:{title:"开始时间","data-index":"starttime"}}),e("a-table-column",{attrs:{title:"结束时间","data-index":"endtime"}}),e("a-table-column",{attrs:{title:"免费距离","data-index":"freeDistance"}}),e("a-table-column",{attrs:{title:"超出运费($/km)","data-index":"fee"}}),e("a-table-column",{attrs:{title:"区号","data-index":"no"}}),e("a-table-column",{attrs:{title:"显示"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.show?e("a-icon",{staticStyle:{"font-size":"24px"},attrs:{theme:"twoTone","two-tone-color":"#52c41a",type:"eye"}}):e("a-icon",{attrs:{type:"eye-invisible"}})]}}])}),e("a-table-column",{attrs:{title:"地址","data-index":"address"}}),e("a-table-column",{attrs:{title:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{attrs:{height:"60px",src:t.photo}})]}}])}),e("a-table-column",{attrs:{title:"地址","data-index":"url"}}),e("a-table-column",{attrs:{fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a-button",{staticStyle:{"margin-right":"14px"},attrs:{size:"small"},on:{click:function(e){return t.copy(a._id)}}},[t._v("复制")]),e("a-button",{staticStyle:{"margin-right":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.edit(a)}}},[t._v("编辑")]),e("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.del(a._id)}}},[t._v("删除")])]}}])})],1),e("a-row",{staticStyle:{margin:"10px 0"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新建")])],1),e("a-modal",{staticClass:"modal",attrs:{title:t.title,width:"800px"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[e("a-form",{attrs:{"label-col":{span:7},"wrapper-col":{span:16}}},[e("a-row",[e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"序号"}},[e("a-input",{model:{value:t.form.seq,callback:function(a){t.$set(t.form,"seq",a)},expression:"form.seq"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"店名"}},[e("a-input",{model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"显示"}},[e("a-switch",{model:{value:t.form.show,callback:function(a){t.$set(t.form,"show",a)},expression:"form.show"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"区号"}},[e("a-input",{model:{value:t.form.no,callback:function(a){t.$set(t.form,"no",a)},expression:"form.no"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"开始时间"}},[e("a-time-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"HH:mm",format:"HH:mm"},model:{value:t.form.starttime,callback:function(a){t.$set(t.form,"starttime",a)},expression:"form.starttime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"结束时间"}},[e("a-time-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"HH:mm",format:"HH:mm"},model:{value:t.form.endtime,callback:function(a){t.$set(t.form,"endtime",a)},expression:"form.endtime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"免运费距离(km)"}},[e("a-input",{model:{value:t.form.freeDistance,callback:function(a){t.$set(t.form,"freeDistance",a)},expression:"form.freeDistance"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"超出运费($/km)"}},[e("a-input",{model:{value:t.form.fee,callback:function(a){t.$set(t.form,"fee",a)},expression:"form.fee"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"活动地址"}},[e("a-input",{model:{value:t.form.url,callback:function(a){t.$set(t.form,"url",a)},expression:"form.url"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"地址简介"}},[e("a-input",{attrs:{type:"textarea",rows:5},model:{value:t.form.address,callback:function(a){t.$set(t.form,"address",a)},expression:"form.address"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"图片"}},[e("a-upload",{staticClass:"avatar-uploader",attrs:{"list-type":"picture-card","show-upload-list":!1,action:"/admin/upload/"},on:{change:t.handleChange}},[t.form.photo?e("img",{attrs:{src:t.form.photo,alt:"avatar"}}):e("div",[e("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("Upload")])],1)])],1)],1)],1),e("a-row",[e("a-col",{attrs:{span:24}},[e("a-form-item",{attrs:{labelCol:{span:3},wrapperCol:{span:20},label:"地图位置"}},[e("gmap-map",{staticClass:"amap-demo",attrs:{center:{lat:t.form.position[1],lng:t.form.position[0]},zoom:12,clickable:!0},on:{click:t.clickMap}},[e("gmap-marker",{attrs:{position:{lat:t.form.position[1],lng:t.form.position[0]}}})],1)],1)],1)],1)],1)],1)],1)},o=[],n=(e("fb6a"),e("d3b7"),e("25f0"),e("ade3")),s={data:function(){var t;return t={loading:!1,list:[],visible:!1,title:"新建",type:"add",form:{name:"",show:!1,no:"",address:"",starttime:"",endtime:"",photo:"",position:[121.5273285,31.21515044],freeDistance:5,fee:0,seq:"",url:""}},Object(n["a"])(t,"loading",!1),Object(n["a"])(t,"page",{pageSize:15,total:0,current:1}),t},mounted:function(){this.getSearch()},methods:{clickMap:function(t){this.form.position=[t.latLng.lng(),t.latLng.lat()]},getSearch:function(){var t=this;this.$http.get("/admin/store/list?s="+(this.page.current-1)*this.page.pageSize+"&n="+this.page.pageSize).then((function(a){a&&(t.list=a.data||[],t.page.total=a.total||0)}))},add:function(){this.visible=!0,this.title="新建",this.type="add"},handleOk:function(){var t=this,a="";"add"==this.type&&(a="/admin/store/add"),"edit"==this.type&&(a="/admin/store/edit"),this.$http.post(a,this.form).then((function(a){a&&(t.visible=!1,t.form={name:"",show:!1,no:"",address:"",starttime:"",endtime:"",photo:"",position:[121.5273285,31.21515044],freeDistance:5,fee:0,seq:"",url:""},t.getSearch())}))},handleChange:function(t){"uploading"!==t.file.status?"done"===t.file.status&&(this.loading=!1,t.file.response&&200==t.file.response.state&&(this.form["photo"]=t.file.response.url)):this.loading=!0},change:function(t){var a=t.current;this.page.current=a,this.getSearch()},isClass:function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)},deepClone:function(t){var a,e=this.isClass(t);if("Object"===e)a={};else{if("Array"!==e)return t;a=[]}for(var i in t){var o=t[i];"Object"==this.isClass(o)||"Array"==this.isClass(o)?a[i]=this.deepClone(o):a[i]=t[i]}return a},edit:function(t){this.form=this.deepClone(t),this.visible=!0,this.type="edit",this.title="编辑"},copy:function(t){var a=this;this.$http.post("/admin/store/copy",{id:t}).then((function(t){t&&a.getSearch()}))},del:function(t){var a=this;this.$createElement;this.$confirm({title:"提示",content:function(t){return t("div",{style:"color:red;"},["确定删除当前数据"])},onOk:function(){a.$http.post("/admin/store/del",{id:t}).then((function(t){t&&(a.page.current=1,a.getSearch())}))},onCancel:function(){}})}}},r=s,l=(e("5a6e"),e("d5e8"),e("2877")),c=Object(l["a"])(r,i,o,!1,null,"5a52a8bc",null);a["default"]=c.exports},c886:function(t,a,e){},d5e8:function(t,a,e){"use strict";var i=e("1106"),o=e.n(i);o.a}}]);